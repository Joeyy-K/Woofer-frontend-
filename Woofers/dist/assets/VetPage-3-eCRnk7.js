import{e as y,r as t,U as w,V as p,j as e,L as N,a as n,b as v}from"./index-w1UzHfgm.js";import{Q as k,B as m}from"./ReactToastify-SnbspBe0.js";const E=()=>{const{id:i}=y(),[a,x]=t.useState(null),[d,h]=t.useState(""),{user:g}=t.useContext(w),[o,c]=t.useState([]),{setVetId:b}=t.useContext(p),u=s=>{h(s.target.value)},f=s=>{b(s)},j=async()=>{try{const s=await fetch(`${n}/reviews/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${v.get("userToken")}`},body:JSON.stringify({user:g.id,veterinary:a.id,review:d})});if(!s.ok)throw new Error("Failed to post review");const r=await s.json();m.success("Review Posted!"),c(l=>[...l,r])}catch(s){console.error("Error:",s),m.error("Review Failed to Post!")}};return t.useEffect(()=>{(async()=>{try{const r=await fetch(`${n}/veterinary/${i}`);if(r.ok){const l=await r.json();x(l),c(l.reviews)}else console.error("Failed to fetch vet details")}catch(r){console.error("Error fetching vet details:",r)}})()},[i]),a?e.jsxs("div",{className:"bg-gray-100 ",children:[e.jsx("div",{className:"items-center justify-center",children:e.jsx(k,{})}),e.jsxs("div",{className:"flex flex-wrap mb-24 container mx-auto ",children:[e.jsx("div",{className:"w-full md:w-1/4 border-r",children:e.jsxs("div",{className:"flex flex-col items-center text-center p-3",children:[e.jsx("img",{className:"rounded-full mt-2 w-36",src:a.profile_picture}),e.jsxs("span",{className:"font-bold",children:[a.first_name," ",a.last_name]}),e.jsx("div",{className:"w-full",children:e.jsx("hr",{className:"my-4 bg-gray-300 h-1"})}),e.jsx("span",{className:"font-bold",children:"Joined At:"}),e.jsx("span",{className:"py-1",children:new Date(a.created_at).toLocaleDateString()}),e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-full",children:[e.jsx("hr",{className:"my-4 bg-gray-300 h-1"}),e.jsx("label",{className:"block mb-2 text-x font-bold text-gray-900 dark:text-white",children:"Contacts:"}),e.jsx("div",{className:"w-full",children:e.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-900 dark:text-white",children:"Email: "})}),e.jsx("p",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",children:a.email}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"}),e.jsx("div",{className:"w-full",children:e.jsx("label",{className:"block mb-3 font-semibold text-gray-900 dark:text-white",children:"Location:"})}),e.jsxs("p",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",children:[a.city.name,", ",a.city.country.name]}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"})]})})]})}),e.jsx("div",{className:"w-full md:w-1/2 border-r",children:e.jsxs("div",{className:"p-3 py-0 mb-4 mt-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsx("h4",{className:"text-right font-bold",children:"Your Veterinarian"})}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"}),e.jsx("div",{className:"flex flex-wrap mt-2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block mb-3 text-x font-bold text-gray-900 dark:text-white",children:"Bio"}),e.jsx("p",{id:"bio",className:"bg-gray-50 border border-gray-300 text-gray-900 text-m rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 h-auto",children:a.bio})]})}),e.jsx("div",{children:e.jsx(N,{to:"/booking/",children:e.jsx("button",{onClick:()=>f(a.id),className:"bg-indigo-600 hover:bg-indigo-500 text-white mt-4  w-full py-2 rounded-md",children:"Book Your Appointment"})})}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"})]})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{className:"mb-5",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"m-4",children:[e.jsx("label",{className:"block text-x font-bold text-gray-900 dark:text-white",children:"Reviews"}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"}),e.jsx("div",{className:"col-lg-8",children:o.length>0?[...o].reverse().slice(0,3).map((s,r)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center",children:[e.jsx("img",{src:"https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg",className:"rounded-full mb-1",alt:"woman avatar",width:"30"}),e.jsx("h5",{className:"font-medium text-sm ml-2",children:s.user.username})]}),e.jsx("p",{className:"text-sm mb-2",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-sm mb-4",children:s.review})]},r)):e.jsx("p",{className:"text-sm mb-4 text-gray-500",children:"Be the first to leave a review!"})}),e.jsx("hr",{className:"my-4 bg-gray-300 h-1"})]})})})}),e.jsxs("div",{className:"w-full mx-4",children:[e.jsx("label",{className:"block font-semibold mb-3 text-gray-900 dark:text-white",children:"Experience:"}),e.jsx("textarea",{className:"bg-gray-50 border mb-4 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-indigo-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500 h-32",placeholder:"Review",value:d,onChange:u})]}),e.jsx("div",{className:"mx-4",children:e.jsx("button",{className:"text-white py-1 px-4 uppercase rounded bg-indigo-600 hover:bg-indigo-500 shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5",type:"button",onClick:j,children:"Send"})})]})})]})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2 animate-bounce",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-black rounded-full"})]})};export{E as default};
